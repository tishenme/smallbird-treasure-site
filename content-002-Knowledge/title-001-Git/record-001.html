<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>入坑 Git，看这一篇就够了 - 掘金 | Smallbird-Treasure</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/smallbird-treasure-site/favicon.ico">
    <link rel="manifest" href="/smallbird-treasure-site/manifest.json">
    <link rel="apple-touch-icon" href="/smallbird-treasure-site/icons/apple-touch-icon-128x128.png">
    <link rel="mask-icon" href="/smallbird-treasure-site/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="小鸟财富 记录前行的脚印">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/android-chrome-128x128.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/smallbird-treasure-site/assets/css/0.styles.6f25b17e.css" as="style"><link rel="preload" href="/smallbird-treasure-site/assets/js/app.525bb3fc.js" as="script"><link rel="preload" href="/smallbird-treasure-site/assets/js/2.cec2e642.js" as="script"><link rel="preload" href="/smallbird-treasure-site/assets/js/1.4c6021ea.js" as="script"><link rel="preload" href="/smallbird-treasure-site/assets/js/29.1b24cec9.js" as="script"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/10.5c917925.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/11.1892ff75.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/12.c87e8553.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/13.0bc7a252.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/14.69302f64.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/15.83f3456b.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/16.8e859efe.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/17.86819af8.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/18.e21bcf54.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/19.aefb35c1.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/20.e698c6e5.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/21.cd9bbb59.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/22.a9e85ac1.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/23.c44118a2.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/24.412a072a.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/25.d12ea22f.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/26.5a0e963a.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/27.83ff90a6.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/28.d894e2f1.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/3.e883c01a.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/30.50f79578.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/31.109c66ab.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/4.33b55c48.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/5.522713a2.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/6.458e58a4.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/7.2493ba3a.js"><link rel="prefetch" href="/smallbird-treasure-site/assets/js/vendors~docsearch.e8a5b9f6.js">
    <link rel="stylesheet" href="/smallbird-treasure-site/assets/css/0.styles.6f25b17e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/smallbird-treasure-site/" class="home-link router-link-active"><img src="/smallbird-treasure-site/icons/android-chrome-128x128.png" alt="Smallbird-Treasure" class="logo"> <span class="site-name can-hide">Smallbird-Treasure</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/smallbird-treasure-site/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/smallbird-treasure-site/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记仓库" class="dropdown-title"><span class="title">笔记仓库</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记仓库" class="mobile-dropdown-title"><span class="title">笔记仓库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/tishenme/smallbird-treasure" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee 仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/tishenme/smallbird-treasure" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/smallbird-treasure-site/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/smallbird-treasure-site/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记仓库" class="dropdown-title"><span class="title">笔记仓库</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记仓库" class="mobile-dropdown-title"><span class="title">笔记仓库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/tishenme/smallbird-treasure" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee 仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/tishenme/smallbird-treasure" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/smallbird-treasure-site/content-001-Soft/" class="sidebar-heading clickable open"><span>软件仓库</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/" class="sidebar-heading clickable open"><span>Window</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html" class="sidebar-link">装机必备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#系统工具" class="sidebar-link">系统工具</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#硬件工具" class="sidebar-link">硬件工具</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#实用工具" class="sidebar-link">实用工具</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#上网冲浪" class="sidebar-link">上网冲浪</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#下载工具" class="sidebar-link">下载工具</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#网盘工具" class="sidebar-link">网盘工具</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#办公软件" class="sidebar-link">办公软件</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#通讯协作" class="sidebar-link">通讯协作</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#设计制作" class="sidebar-link">设计制作</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-001.html#影音娱乐" class="sidebar-link">影音娱乐</a></li></ul></li><li><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-002.html" class="sidebar-link">开发工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-002.html#远程控制" class="sidebar-link">远程控制</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-002.html#开发环境" class="sidebar-link">开发环境</a></li><li class="sidebar-sub-header"><a href="/smallbird-treasure-site/content-001-Soft/title-001-Window/record-002.html#工具集锦" class="sidebar-link">工具集锦</a></li></ul></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="入坑-git-看这一篇就够了-掘金"><a href="#入坑-git-看这一篇就够了-掘金" class="header-anchor">#</a> 入坑 Git，看这一篇就够了 - 掘金</h1> <hr> <ul><li>入坑 Git，看这一篇就够了 - 掘金</li> <li><a href="https://juejin.cn/post/7289661061993005093" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/7289661061993005093<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>你可以不懂 Git 背后的实现原理，你可以不了解它所有的功能，但你一定要会用命令行，一定要知道除了 add、commit、push 之外的常用命令。听话，不要只会用 GUI。</li> <li>2024-05-18 16:13:18</li></ul> <hr> <p>​<img src="assets/4de61001f0024234b992a5bd4c942698tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-ptbpehe.awebp" alt="">​</p> <h2 id="🎼-前言"><a href="#🎼-前言" class="header-anchor">#</a> 🎼 前言</h2> <p>最近在网上刷到了电视剧中「神级」伪程序员的骚操作，就是通过「秋秋」把代码发给老板，吐槽者就说：「天哪，这么弔的程序员（盲敲键盘、用 Word 写代码并且还能运行）居然不用 Git...」</p> <p>现实中，没有程序员不用 Git 没错吧？但又有多少人只停留在只会 GUI 操作上？</p> <p>本文将以作者对 Git 的浅薄了解，带你入坑 Git（断断续续连着写了一个月）。</p> <h2 id="tl-dr"><a href="#tl-dr" class="header-anchor">#</a> TL;DR</h2> <p>你可以不懂 Git 背后的实现原理，你可以不了解它所有的功能，但你一定要会用命令行，一定要知道除了 <code>add</code>​、<code>commit</code>​、<code>push</code>​ 之外还有别的常用命令。</p> <h2 id="主要内容"><a href="#主要内容" class="header-anchor">#</a> 主要内容</h2> <p>​<img src="assets/f63f959f8eea4de3bf9e14626c4503cftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-hrv3ooi.awebp" alt="">​</p> <h2 id="适合读者"><a href="#适合读者" class="header-anchor">#</a> 适合读者</h2> <ul><li>想要了解 Git 的新人</li> <li>只会用 GUI 工具的同学</li></ul> <h2 id="你将获得"><a href="#你将获得" class="header-anchor">#</a> 你将获得</h2> <ol><li>Git 的基本概念</li> <li>Git 的安装与基本设置</li> <li>Git 客户端（纯文本、GUI、系统集成、插件）</li> <li>多用命令行，以及哪些常用命令，而不要强依赖 GUI（除了 Merge 推荐 JetBrains 之外）</li> <li>一些小技巧</li></ol> <h2 id="编辑历史"><a href="#编辑历史" class="header-anchor">#</a> 编辑历史</h2> <table><thead><tr><th>日期</th> <th>版本说明</th></tr></thead> <tbody><tr><td>2024/05/17</td> <td>V2，新增《不常用，但很有用的技巧》章节</td></tr> <tr><td>2023/10/15</td> <td>V1</td></tr></tbody></table> <h2 id="🧬-git-简介"><a href="#🧬-git-简介" class="header-anchor">#</a> 🧬 Git 简介</h2> <p><a href="https://git-scm.com/" title="https://git-scm.com" target="_blank" rel="noopener noreferrer">Git<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 <a href="https://baike.baidu.com/item/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%9C%AC%E7%BA%B3%E7%AC%AC%E5%85%8B%E7%89%B9%C2%B7%E6%89%98%E7%93%A6%E5%85%B9/1034429" title="https://baike.baidu.com/item/%E6%9E%97%E7%BA%B3%E6%96%AF%C2%B7%E6%9C%AC%E7%BA%B3%E7%AC%AC%E5%85%8B%E7%89%B9%C2%B7%E6%89%98%E7%93%A6%E5%85%B9/1034429" target="_blank" rel="noopener noreferrer">Linus Torvalds<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 为了帮助管理 Linux 内核开发而开发的版本控制系统（Version Control System，以下简称 VCS），和传统集中式如 CVS、SVN 不同，Git 的特点是分布式，不一不必依赖远程服务器。</p> <h2 id="三个主要功能"><a href="#三个主要功能" class="header-anchor">#</a> 三个主要功能</h2> <p>作为分布式版本控制系统，Git 的主要功能包括：</p> <ol><li>​<strong>版本控制</strong>​：跟踪和管理代码的版本，方便开发人员对代码进行版本控制和回溯</li> <li>​<strong>分支管理</strong>​：开发人员可以在不同的分支上进行开发，并在需要时合并分支</li> <li>​<strong>分布式协作</strong>​：Git 特点是分布式加云端同步，方便开发者在不同设备上进行开发和协作</li></ol> <h2 id="四个空间"><a href="#四个空间" class="header-anchor">#</a> 四个空间</h2> <p>​<img src="assets/80d66021498245cebcb91c35b97d79e3tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-s6yrx87.awebp" alt="">​</p> <ul><li>​<strong>Working Tree（工作区）</strong> ​：即文件目录，存放所有已跟踪、未跟踪、已提交、未提交的文件</li> <li>​<strong>Index（暂存区，又叫 Stage）</strong> ​：存放临时（待提交）的改动，它实际上是一个二进制文件 <code>.git/index</code>​</li> <li>​<strong>Local Repository（本地仓库）</strong> ​：「临时」的安全数据存放区域</li> <li>​<strong>Remote Repository（远程仓库）</strong> ​：真正安全的数据存放区域，托管代码的服务器，最著名的就是 <a href="https://github.com/" title="https://github.com" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，公司都会自建服务器（多数用 GitLab），当然我们自己也可以自建服务器玩玩</li></ul> <p>其中「本地仓库」是 Git 作为「分布式」版本控制软件的关键。</p> <h2 id="四种文件状态"><a href="#四种文件状态" class="header-anchor">#</a> 四种文件状态</h2> <table><thead><tr><th>状态</th> <th>说明</th> <th>图示</th></tr></thead> <tbody><tr><td>Untracked</td> <td>新增的文件，仅存在于 Working Tree</td> <td>​<img src="assets/4fec56b16254493fb2de6c2e3e997280tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-1e2dxdo.awebp" alt="">​</td></tr> <tr><td>New file</td> <td>Untracked 文件在<code>git add</code>​后的状态，待<code>git commit</code>​进入本地仓库，或<code>git restore --staged &lt;file&gt;</code>​重回 Untracked</td> <td>​<img src="assets/97ccb53651df44aeb22380b0a862de69tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-bx9atd1.awebp" alt="">​</td></tr> <tr><td>Modified</td> <td>已登记在案（在本地仓库中或者在暂存库中）的文件最近又发生了改动</td> <td>​<img src="assets/e53aeda55aef4ca1a6a7725090768065tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-vostnrk.awebp" alt="">​</td></tr> <tr><td>Staged</td> <td>已暂存，尚未提交，<code>git add</code>​后的文件状态，<code>git restore --staged &lt;file&gt;</code>​返回之前的状态</td> <td>​<img src="assets/9dd3ad96408c486082f9b24c3d1be831tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-zsue7is.awebp" alt="">​</td></tr> <tr><td>Committed</td> <td>​<code>git commit</code>​后的文件状态</td> <td>​<img src="assets/79729835aca948e6ba4acba29fe466eatplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-35emsz1.awebp" alt="">​</td></tr></tbody></table> <p>说明一下：</p> <ol><li>图示中表示状态的颜色，绿色表示「已暂存」，红色表示「未暂存」</li> <li>图示中 Powerline 状态（来自 <a href="https://github.com/romkatv/powerlevel10k#oh-my-zsh" title="https://github.com/romkatv/powerlevel10k#oh-my-zsh" target="_blank" rel="noopener noreferrer">powerlevel10k<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>），<code>?</code>​ 表示 「Untracked 文件数」，<code>+</code>​ 表示「已暂存文件数」，<code>!</code>​ 表示「未暂文件数」</li> <li>需要注意的是，「Untracked」一定「未暂存」，「New file」一定「已暂存」，「Modified」则有「已暂存的 Modified」和「未暂存的 Modified」两种（其实我认为可以把 Untracked 视为一种特殊的 New file 更好理解）</li></ol> <p>另外，我没有找到 <code>git push</code>​ 之后文件的状态，难道是「remotely tracked」？但由于 Git 是一个分布式的 VCS，可能这就不是很重要吧。</p> <h2 id="三个基本操作-三板斧"><a href="#三个基本操作-三板斧" class="header-anchor">#</a> 三个基本操作（三板斧）</h2> <p>上图同时也体现了 Git 几个工作区之间的状态流转所用到的关键命令，同集中式 CVS 的一次 commit 不同，Git 需要经历 <code>add</code>​ → <code>commit</code>​ → <code>push</code>​ 三步，也就是被戏称为 Git 三板斧的三个基本操作。</p> <p>这对当时经历 SVN 到 Git 迁移的程序员来说，闹出过不少笑话。记得当时有位老兄是这么说的：「在 Git，就像对女朋友一样，你不能只是『承诺』，那没用，必须『推到』，那才是真的有用。」</p> <ol><li>​<code>git add</code>​：将文件的改动添加到暂存区</li> <li>​<code>git commit</code>​：将暂存区的改动，提交到本地仓库</li> <li>​<code>git push</code>​：将本地仓库的当前分支，提交到远程仓库对应的分支</li></ol> <p>注意，这三板斧是一个链式的线性操作。</p> <h2 id="五种-url-协议"><a href="#五种-url-协议" class="header-anchor">#</a> 五种 URL 协议</h2> <table><thead><tr><th>格式</th> <th>例子</th> <th>优点</th> <th>缺点</th> <th>适用场景</th></tr></thead> <tbody><tr><td>HTTP/HTTPS 协议</td> <td>​<code>https://github.com/user/repo.git</code>​</td> <td>简单易用</td> <td>传输速度较慢；私有仓库，可能需要用户名和密码</td> <td>大多数场景</td></tr> <tr><td>SSH 协议</td> <td>​<code>git@github.com:user/repo.git</code>​</td> <td>安全可靠</td> <td>设置相对较复杂</td> <td>需要频繁进行 Git 操作的场景</td></tr> <tr><td>Git 协议</td> <td>​<code>git://github.com/user/repo.git</code>​</td> <td>速度快、安全性高（比 HTTP/HTTPS 和 SSH 协议具有更快的传输速度，并且不需要对外暴露仓库的读写权限）</td> <td>不适用于排除防火墙的企业环境</td> <td>-</td></tr> <tr><td>文件路径</td> <td>​<code>/path/to/repository.git</code>​</td> <td>无网络传输，速度非常快</td> <td>仅适用于本地操作</td> <td>开发和测试环境</td></tr> <tr><td>子模块 URL</td> <td>任何以上格式</td> <td>非常灵活（子模块 URL 可以指向任何 Git 仓库）</td> <td>对于代码维护来说并不利</td> <td>代码复用和模块化开发</td></tr></tbody></table> <h2 id="git-目录"><a href="#git-目录" class="header-anchor">#</a> .git 目录</h2> <p>Git 的所有信息都在 <code>.git</code>​ 目录下，我们看一下它下面有些什么：</p> <p>​<img src="assets/2076fe21afc84b249e28ab5bc4f4e7eatplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-tmt9on5.awebp" alt="">​</p> <table><thead><tr><th>名称</th> <th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>​<code>COMMIT_EDITMSG</code>​</td> <td>文本文件</td> <td>保存着最近一次的提交信息，作用仅仅只是给用户一个参考</td></tr> <tr><td>​<code>HEAD</code>​</td> <td>文本文件</td> <td>记录了当前分支的指向</td></tr> <tr><td>​<code>config</code>​</td> <td>文本文件</td> <td>当前仓库的本地配置，会与全局的进行合并，本地的同名配置优先</td></tr> <tr><td>​<code>description</code>​</td> <td>文本文件</td> <td>项目描述（但我看不懂它的来源和作用）</td></tr> <tr><td>​<code>hooks</code>​</td> <td>目录</td> <td>默认只有一堆钩子的 sample 文件</td></tr> <tr><td>​<code>index</code>​</td> <td>二进制文件</td> <td>暂存区</td></tr> <tr><td>​<code>info</code>​</td> <td>目录</td> <td>默认只有一个<code>exclude</code>​文件</td></tr> <tr><td>​<code>logs</code>​</td> <td>目录</td> <td>操作记录，包含文件<code>HEAD</code>​（就是<code>git reflog</code>​来源）、<code>refs/heads</code>​目录、<code>refs/remotes</code>​目录</td></tr> <tr><td>​<code>objects</code>​</td> <td>目录</td> <td>存放所有的 Git 对象，哈希值一共 40 位，前 2 位作为文件夹名称，后 38 位作为对象文件名</td></tr> <tr><td>​<code>tags</code>​</td> <td>目录</td> <td>存储 Git 各种引用，包含三个目录<code>heads</code>​（所有的本地分支）、<code>tags</code>​（所有的本地 Tag）、<code>remotes</code>​下只有<code>origin/HEAD</code>​</td></tr></tbody></table> <h2 id="🕋-安装与设置"><a href="#🕋-安装与设置" class="header-anchor">#</a> 🕋 安装与设置</h2> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>你拿到 Mac 后，可能已经预装好了 Apple Git：</p> <p>​<img src="assets/7ada3395f23849628cc79c6d066ba743tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-es4s9ia.awebp" alt="">​</p> <p>一般比 <a href="https://git-scm.com/downloads" title="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">官方版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的要低，想要安装最新版的，用 <a href="https://brew.sh/" title="https://brew.sh" target="_blank" rel="noopener noreferrer">homebrew<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>brew <span class="token function">install</span> <span class="token function">git</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>但也可能没有 Apple Git，而 homebrew 自己的安装又需要用到 <code>git</code>​，事情就变成「安装 git 需要现有 git」的尴尬场面，可以按照提示先安装命令行工具。</p></blockquote> <p>安装后，重启 Terminal，即可看到安装了最新版的 <code>git</code>​：</p> <ol><li>​<code>git -v</code>​ 看到的是 Apple 预装的 <code>2.39.2</code>​</li> <li>​<code>which git</code>​ 显示位置为  <strong>/user/bin/git</strong></li> <li>​<code>brew install git</code>​ 安装官方 Git</li> <li>​<code>git -v</code>​ 看到的仍是原来的 Apple Git</li> <li>重启 Terminal 后，<code>git -v</code>​ 看到的是新装版本</li> <li>​<code>which git</code>​ 显示位置为  <strong>/opt/homebrew/bin/git</strong></li></ol> <p>​<img src="assets/fdb35889838a432d9fc93c0ab9a463bdtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-m3wxe58.awebp" alt="">​</p> <p>想要重新用回 Apple Git，<code>brew uninstall git</code>​；临时用回 Apple Git，可以用全路径 <code>/usr/bin/git</code>​。</p> <h2 id="设置"><a href="#设置" class="header-anchor">#</a> 设置</h2> <h3 id="ssh"><a href="#ssh" class="header-anchor">#</a> SSH</h3> <p>使用 SSH 协议进行 Git 操作，安全可靠，速度相对较快，需要配置 SSH 密钥，同时需要在 Git 服务器（GitHub 或 GitLab 等）上添加对应的公钥。</p> <p>一般在设置页面上链有说明文档，完全不必担心怎么设置。</p> <p>以 Mac + GitHub 为例：</p> <ol><li>​<code>gcl git@...</code>​尝试 clone SSH Url，失败</li> <li>​<code>ssh-keygen -t ed25519 -C &quot;em@il&quot;</code>​ 生成跟邮箱对应的 SSH Key</li> <li>​<code>pbcopy &lt; ~/.ssh/id_ed25519.pub</code>​ 拷贝公钥内容至剪贴板，去 GitHub <strong>Settings</strong> → <strong>SSH and GPG Keys</strong> → <strong>New SSH</strong> 黏贴</li> <li>​<code>ssh -T git@github.com</code>​ 测试（可以跳过）</li> <li>再次 clone，成功</li></ol> <p>​<img src="assets/da909e466f7d47bd9bee07e5c810d058tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-dpt0oss.awebp" alt="">​</p> <h3 id="用户名和邮箱"><a href="#用户名和邮箱" class="header-anchor">#</a> 用户名和邮箱</h3> <p>Git 会在适当的时候提示你，比如当你需要提交代码的时候，它才会问你要账号信息：</p> <p>​<img src="assets/91f94a3766244adab3cafd7afeb9541ftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-6wgeoul.awebp" alt="">​</p> <p>大部分公司的 Git 规范一般都会要求用公司的邮箱，因此预先设置用户名和邮箱尤为重要：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name 我是谁
<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email em@li.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="主分支名"><a href="#主分支名" class="header-anchor">#</a> 主分支名</h3> <p>Apple Git 的主分支名为 <code>main</code>​，Github 也已经把主分支名改成了 <code>main</code>​，但官方的 Git 在 <code>git init</code>​ 的时候还会有警告：</p> <p>​<img src="assets/afd77b1471fa4dcf833cf74140383646tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-9mhkoem.awebp" alt="">​</p> <p>按它的说明改一下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> init.defaultBranch main
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="全局-ignore"><a href="#全局-ignore" class="header-anchor">#</a> 全局 Ignore</h3> <p>Git 仓库一定会有 <code>.gitignore</code>​，但那应当仅限于操作系统自动生成的文件、构建和单测产物等等。</p> <p>我们也可以增加「全局 Ignore」 <code>~/.gitignore_global</code>​，比如临时存放只有自己会用的一些文件，不想删，不想挪位置，不想提交。</p> <p>比如我有一些通用的模板代码放在某个目录下，然后软链接进来；又或者经常性地，我会将「临时」删除的文件 <code>mv</code>​ 到某个格式的目录下，最后再一起「硬」删除。</p> <p>我的习惯是一定忽略四个连续 <code>_</code>​ 打头的文件或目录，如下操作：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~
<span class="token function">touch</span> .gitignore_global
<span class="token builtin class-name">echo</span> <span class="token string">&quot;____*&quot;</span> <span class="token operator">&gt;</span> .gitignore_global
<span class="token function">git</span> config <span class="token parameter variable">--global</span> core.excludesFile ~/.gitignore_global
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="config-概览"><a href="#config-概览" class="header-anchor">#</a> Config 概览</h2> <p>以上所有的全局配置都存入 ​ <strong>~/.gitconfig</strong>​，可以直接看文件内容，也可以敲命令 <code>git config --list --global</code>​ 查看。</p> <p>​<img src="assets/7611ba122055490faeb31d70cc00f0c9tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-ivpo77v.awebp" alt="">​</p> <p>​<img src="assets/73a42dfadaba444c9f8a6456f61fb6c3tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-97a54ob.awebp" alt="">​</p> <p>在 Git 本地仓库下的 <code>.git/config</code>​ 中存着当前仓库的设置信息，Git 读取配置（<code>git config --list</code>​）会与全局的进行合并。</p> <h2 id="🖲-git-客户端"><a href="#🖲-git-客户端" class="header-anchor">#</a> 🖲 Git 客户端</h2> <p>这里列数了我在用和浅尝过的一些客户端工具，更多可以看官方的文档 <a href="https://git-scm.com/downloads/guis" title="https://git-scm.com/downloads/guis" target="_blank" rel="noopener noreferrer">《GUI Clients》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="纯文本客户端"><a href="#纯文本客户端" class="header-anchor">#</a> 纯文本客户端</h2> <h3 id="tig-★★★★★"><a href="#tig-★★★★★" class="header-anchor">#</a> tig ★★★★★</h3> <p>​<img src="assets/b178336696474a1a906c16bbc9492ff3tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-2x7fn1s.awebp" alt="">​</p> <p>名字取得好，看 Git 信息必备，我最常用的 Git 工具。</p> <ul><li>URL：<a href="https://jonas.github.io/tig" title="https://jonas.github.io/tig" target="_blank" rel="noopener noreferrer">jonas.github.io/tig<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>平台：Mac / Linux</li> <li>安装：<code>brew install tig</code>​</li> <li>推荐指数：★★★★★</li></ul> <h3 id="lazygit-★★★★★"><a href="#lazygit-★★★★★" class="header-anchor">#</a> lazygit ★★★★★</h3> <p>​<img src="assets/922ecd81c1b5482fafef667b4049e78dtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-im3a2vd.awebp" alt="">​</p> <p>Github 39K Star；全功能 Git 客户端。</p> <ul><li>URL：<a href="https://github.com/jesseduffield/lazygit" title="https://github.com/jesseduffield/lazygit" target="_blank" rel="noopener noreferrer">github.com/jesseduffie…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 39K Star</li> <li>平台：Mac / Linux</li> <li>安装：<code>brew install lazygit</code>​</li> <li>推荐指数：★★★★★</li></ul> <h3 id="gitui-★★☆"><a href="#gitui-★★☆" class="header-anchor">#</a> gitui ★★☆</h3> <p>​<img src="assets/1a157e54fc4f4eb8b61885ef1b1b965dtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-tuo8x0d.awebp" alt="">​</p> <blockquote><p>注意不是 <code>git-gui</code>​。</p></blockquote> <p>比较专注于待提交，不支持鼠标事件是个遗憾。</p> <ul><li>URL：<a href="https://github.com/extrawurst/gitui" title="https://github.com/extrawurst/gitui" target="_blank" rel="noopener noreferrer">github.com/extrawurst/…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 14.1K Star</li> <li>免费</li> <li>平台：Mac / Linux</li> <li>安装：<code>brew install gitui</code>​</li> <li>推荐指数：★★☆</li></ul> <h2 id="gui-客户端"><a href="#gui-客户端" class="header-anchor">#</a> GUI 客户端</h2> <blockquote><p>珍爱生命，少用 GUI。</p></blockquote> <h3 id="gitkraken-★★★★☆"><a href="#gitkraken-★★★★☆" class="header-anchor">#</a> GitKraken ★★★★☆</h3> <p>​<img src="assets/f27b54fca2ab40579bc4908be2416f8btplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-s3xvcqt.awebp" alt="">​</p> <p>号称「The world's most powerful suite of Git tools」，界面确实好看，功能也确实不错。</p> <p>免费版的不能用在企业自搭的 GitLab 或 BitBucket，会要求升级账号（要钱）。</p> <ul><li>URL：<a href="https://www.gitkraken.com/" title="https://www.gitkraken.com" target="_blank" rel="noopener noreferrer">www.gitkraken.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>收费：个人版免费；Pro 版 $4.95/月；Team ban $8.95/人月；企业版 $18.95/人月</li> <li>平台：Mac / Windows / Linux</li> <li>安装：下载安装</li> <li>推荐指数：★★★★☆</li></ul> <h3 id="sourcetree-★★★★"><a href="#sourcetree-★★★★" class="header-anchor">#</a> SourceTree ★★★★</h3> <p>​<img src="assets/e299991e3e124d7f9d2903c0468a4deftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-6s2rv9y.awebp" alt="">​</p> <p>免费的全功能 Git 客户端，UI 设计还不错。</p> <ul><li>URL：<a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.sourcetreeapp.com" title="https://www.sourcetreeapp.com" target="_blank" rel="noopener noreferrer">www.sourcetreeapp.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>免费</li> <li>平台：Mac / Windows</li> <li>安装：下载安装</li> <li>推荐指数：★★★★</li></ul> <h3 id="tower-★★★★"><a href="#tower-★★★★" class="header-anchor">#</a> Tower ★★★★</h3> <p>​<img src="assets/fbf51d897043466d97d5548632bc5ec7tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-obu2bu0.awebp" alt="">​</p> <p>跟 SourceTree 有点像，但个人感觉 Tower 更好看一些。</p> <ul><li>URL：<a href="https://www.git-tower.com/" title="https://www.git-tower.com" target="_blank" rel="noopener noreferrer">www.git-tower.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>收费：基础版 $69；Pro 版 $99；学生和教师可获取免费 License</li> <li>平台：Mac / Windows</li> <li>安装：下载安装</li> <li>推荐指数：★★★★</li></ul> <h3 id="sublimemerge-★★★"><a href="#sublimemerge-★★★" class="header-anchor">#</a> SublimeMerge ★★★</h3> <p>​<img src="assets/6e545557298e4095a9cfda1708aa969btplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-axz1q0r.awebp" alt="">​</p> <p>Sublime 作者出品，必属精品；但是一些基础的功能，比如切换主题，也需要收费。</p> <ul><li>URL：<a href="https://www.sublimemerge.com/" title="https://www.sublimemerge.com" target="_blank" rel="noopener noreferrer">www.sublimemerge.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>收费：$99</li> <li>平台：Mac / Windows / Linux</li> <li>安装：下载安装</li> <li>推荐指数：★★★</li></ul> <h3 id="fork-★★☆"><a href="#fork-★★☆" class="header-anchor">#</a> Fork ★★☆</h3> <p>​<img src="assets/1cd23ccb3a1d4f86b2441efcb87940ddtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-acdig1p.awebp" alt="">​</p> <p>和免费的 SourceTree 非常像，所以还是用 SourceTree 吧。</p> <ul><li>URL：<a href="https://git-fork.com/" title="https://git-fork.com" target="_blank" rel="noopener noreferrer">git-fork.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>收费：$49.99</li> <li>平台：Mac / Windows / Linux</li> <li>安装：下载安装</li> <li>推荐指数：★★☆</li></ul> <h3 id="smartgit-★★☆"><a href="#smartgit-★★☆" class="header-anchor">#</a> SmartGit ★★☆</h3> <p>​<img src="assets/75991a5f3d064d6d8ce52f0badcc1e5etplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-17723my.awebp" alt="">​</p> <p>师出名门，就是感觉性能..不能尽如人意。</p> <ul><li>URL：<a href="https://www.syntevo.com/smartgit" title="https://www.syntevo.com/smartgit" target="_blank" rel="noopener noreferrer">www.syntevo.com/smartgit<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>收费：$5.90/Month</li> <li>平台：Mac / Windows / Linux</li> <li>安装：下载安装</li> <li>推荐指数：★★☆</li></ul> <h3 id="gitup-★★★☆"><a href="#gitup-★★★☆" class="header-anchor">#</a> GitUp ★★★☆</h3> <p>​<img src="assets/ebcc3eec3a5646a58e687ff0029590aatplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-pwy9q7l.awebp" alt="">​</p> <p>还蛮..特别的，关注在提交历史和版本计较的体验上。</p> <ul><li>URL：<a href="https://github.com/git-up/GitUp" title="https://github.com/git-up/GitUp" target="_blank" rel="noopener noreferrer">github.com/git-up/GitU…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>免费</li> <li>平台：Mac</li> <li>安装：下载安装</li> <li>推荐指数：★★★☆</li></ul> <h3 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h3> <p>另外还有好多好多，没有一一试用，简单罗列一下：</p> <ul><li><a href="https://github.com/jlord/git-it-electron" title="https://github.com/jlord/git-it-electron" target="_blank" rel="noopener noreferrer">git-it<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.gitfox.app/" title="https://www.gitfox.app" target="_blank" rel="noopener noreferrer">Gitfox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://gitblade.com/" title="https://gitblade.com" target="_blank" rel="noopener noreferrer">GitBlade<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/gitx/gitx" title="https://github.com/gitx/gitx" target="_blank" rel="noopener noreferrer">GitX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/Murmele/Gittyup" title="https://github.com/Murmele/Gittyup" target="_blank" rel="noopener noreferrer">Gittyup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="系统集成"><a href="#系统集成" class="header-anchor">#</a> 系统集成</h2> <h3 id="gitfinder-★★☆"><a href="#gitfinder-★★☆" class="header-anchor">#</a> GitFinder ★★☆</h3> <p>​<img src="assets/48811f855fcc4d679e6de24e41ac3653tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-9tau6go.awebp" alt="">​</p> <p>未曾试用，喜欢类似 TortoiseGit 体验的同学可以试试。</p> <p>但 Mac 系统有 <code>.DS_Store</code>​，我并不喜欢用 Finder 看开发目录。</p> <ul><li>URL：<a href="https://gitfinder.com/" title="https://gitfinder.com" target="_blank" rel="noopener noreferrer">gitfinder.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>收费：$29.95</li> <li>平台：Mac</li> <li>安装：下载安装</li> <li>推荐指数：★★☆</li></ul> <h3 id="tortoisegit-★★★★"><a href="#tortoisegit-★★★★" class="header-anchor">#</a> TortoiseGit ★★★★</h3> <p>​<img src="assets/c1f05a50893a49229f11e0fed48bf25ctplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-0s96y2u.awebp" alt="">​</p> <p>用过它的两个兄长 TortoiseCVS 和 TortoiseSVN，Windows 用户值得拥有。</p> <ul><li>URL：<a href="https://tortoisegit.org/" title="https://tortoisegit.org" target="_blank" rel="noopener noreferrer">tortoisegit.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>免费</li> <li>平台：Windows</li> <li>安装：下载安装</li> <li>推荐指数：★★★★</li></ul> <h2 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h2> <p>IDE 或编辑器的 Git 插件应该是用的最多的 Git 客户端了吧。</p> <h3 id="jetbrains-家族-★★★★★"><a href="#jetbrains-家族-★★★★★" class="header-anchor">#</a> JetBrains 家族 ★★★★★</h3> <p>JB 的 Git 体验是我用过最棒的，直观的修改状态提示（文件树和编辑器）、方便的快捷键、丰富的菜单项、无与伦比的 Diff Merge，正是它的 Git 体验，让我毫不犹豫地弃 Eclipse 而改投 WebStorm 的怀抱。</p> <p>即使通常使用命令行进行大部分的 Git 操作，在遇到需要人肉 Merge 的时候，我一定会用 JB 的 Git。</p> <ul><li>URL：-</li> <li>收费：IDE 内置插件</li> <li>平台：Mac / Linux / Windows</li> <li>安装：IDE 内置</li> <li>推荐指数：★★★★★</li></ul> <h3 id="vscode-gitlens-★★★★★"><a href="#vscode-gitlens-★★★★★" class="header-anchor">#</a> VSCode - GitLens ★★★★★</h3> <p>VSCode 下操作 Git 不二之选。</p> <ul><li>URL：<a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens" title="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens" target="_blank" rel="noopener noreferrer">marketplace.visualstudio.com/items?itemN…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>免费</li> <li>平台：Mac / Linux / Windows</li> <li>安装：插件市场</li> <li>推荐指数：★★★★★</li></ul> <h3 id="eclipse-egit-★★★"><a href="#eclipse-egit-★★★" class="header-anchor">#</a> Eclipse - EGit ★★★</h3> <p>Eclipse 内置插件，喜欢 Eclipse 一定会用它，但体验真的没有 JB 家族的好。</p> <ul><li>URL：<a href="https://eclipse.dev/egit" title="https://eclipse.dev/egit" target="_blank" rel="noopener noreferrer">eclipse.dev/egit<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>免费</li> <li>平台：Mac / Linux / Windows</li> <li>安装：IDE 内置</li> <li>推荐指数：★★★</li></ul> <h2 id="汇总"><a href="#汇总" class="header-anchor">#</a> 汇总</h2> <p>纯文本 UI 推荐 <code>tig</code>​ 和 <code>lazygit</code>​；标准 GUI 客户端推荐 GitKraken 和 SourceTree；系统集成看个人喜好吧；IDE 推荐 JB 家族和 VSCode 的 GitLens。</p> <h2 id="🚥-命令行"><a href="#🚥-命令行" class="header-anchor">#</a> 🚥 命令行</h2> <blockquote><p>珍爱生命，多用命令行。不要只用 GUI，不要只会「三板斧」。</p></blockquote> <p>GUI 工具固然方便，优秀的程序员更应该对 Git 常用命令了如指掌。</p> <h2 id="omz-fig"><a href="#omz-fig" class="header-anchor">#</a> OMZ &amp; Fig</h2> <p>说到命令行，又不得不提 <a href="https://github.com/ohmyzsh/ohmyzsh" title="https://github.com/ohmyzsh/ohmyzsh" target="_blank" rel="noopener noreferrer">Oh My Zsh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://fig.io/" title="https://fig.io" target="_blank" rel="noopener noreferrer">Fig<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>OMZ 的 <a href="https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git" title="https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git" target="_blank" rel="noopener noreferrer">Git 插件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 提供了近 200 个简化命令别名，能够极大地提升效率。</p> <p>Fig 能够为正在输入的命令及参数提供直观友好的提示，是了解命令及参数的最好老师：</p> <p>​<img src="assets/99c2f0da96df4fe49fab24e7e6015e2dtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-uxfa0i2.awebp" alt="">​</p> <h2 id="仓库操作"><a href="#仓库操作" class="header-anchor">#</a> 仓库操作</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>初始化</td> <td>​<code>git init</code>​</td> <td>-</td></tr> <tr><td>克隆</td> <td>​<code>git clone &lt;url&gt;</code>​</td> <td>​<code>gcl</code>​</td></tr> <tr><td>配置（仅对当前仓库）</td> <td>​<code>git config</code>​</td> <td>-</td></tr> <tr><td>获取当前仓库配置信息</td> <td>​<code>git config --list</code>​</td> <td>​<code>gcf</code>​</td></tr> <tr><td>添加远程</td> <td>​<code>git remote add &lt;name&gt; &lt;url&gt;</code>​</td> <td>​<code>gra &lt;name&gt; &lt;url&gt;</code>​</td></tr> <tr><td>设置远程</td> <td>​<code>git remote set-url &lt;name&gt; &lt;url&gt;</code>​</td> <td>​<code>grset &lt;name&gt; &lt;url&gt;</code>​</td></tr> <tr><td>移除远程</td> <td>​<code>git remote rm &lt;name&gt;</code>​</td> <td>​<code>grrm &lt;name&gt;</code>​</td></tr> <tr><td>更名远程</td> <td>​<code>git remote rename &lt;from&gt; &lt;to&gt;</code>​</td> <td>​<code>grmv &lt;from&gt; &lt;to&gt;</code>​</td></tr></tbody></table> <h2 id="分支操作"><a href="#分支操作" class="header-anchor">#</a> 分支操作</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>查看本地分支列表</td> <td>​<code>git branch</code>​</td> <td>​<code>gb</code>​</td></tr> <tr><td>查看远程分支列表</td> <td>​<code>git branch -r</code>​</td> <td>​<code>gbr</code>​</td></tr> <tr><td>查看本地 + 远程分支列表</td> <td>​<code>git branch -a</code>​</td> <td>​<code>gba</code>​</td></tr> <tr><td>新切分支</td> <td>​<code>git checkout -b &lt;branch&gt;</code>​</td> <td>​<code>gcb &lt;branch&gt;</code>​</td></tr> <tr><td>切换分支</td> <td>​<code>git checkout &lt;branch&gt;</code>​</td> <td>​<code>gco &lt;branch&gt;</code>​</td></tr> <tr><td>新切分支 2</td> <td>​<code>git switch -c &lt;branch&gt;</code>​</td> <td>​<code>gswc &lt;branch&gt;</code>​</td></tr> <tr><td>切换分支2</td> <td>​<code>git switch &lt;branch&gt;</code>​</td> <td>​<code>gsw &lt;branch&gt;</code>​</td></tr> <tr><td>切回主分支</td> <td>​<code>git checkout &lt;main-branch&gt;</code>​需分清<code>main</code>​还是<code>master</code>​</td> <td>​<code>gcm</code>​</td></tr> <tr><td>切回主分支 2</td> <td>​<code>git switch &lt;main-branch&gt;</code>​需分清<code>main</code>​还是<code>master</code>​</td> <td>​<code>gswm</code>​</td></tr> <tr><td>重命名分支</td> <td>​<code>git branch -m &lt;branch&gt;</code>​</td> <td>​<code>gbm &lt;branch&gt;</code>​</td></tr> <tr><td>删除分支</td> <td>​<code>git branch -d &lt;branch&gt;</code>​</td> <td>​<code>gbd &lt;branch&gt;</code>​</td></tr> <tr><td>删除分支（强删）</td> <td>​<code>git branch -D &lt;branch&gt;</code>​</td> <td>​<code>gbD &lt;branch&gt;</code>​</td></tr> <tr><td>清除本地残留的远程分支记录（否则命令行提示会干扰<code>git checkout</code>​）</td> <td>​<code>git remote prune origin</code>​</td> <td>-</td></tr> <tr><td>合并主分支</td> <td>​<code>git merge master 或 main</code>​</td> <td>​<code>gmom</code>​</td></tr></tbody></table> <h2 id="变更操作"><a href="#变更操作" class="header-anchor">#</a> 变更操作</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>从远程仓库下载最新变更至本地仓库</td> <td>​<code>git fetch</code>​</td> <td>​<code>gf</code>​</td></tr> <tr><td>​<code>git fetch</code>​之前清理残留的远程分支记录</td> <td>​<code>git fetch --all --prune</code>​</td> <td>​<code>gfa</code>​</td></tr> <tr><td>从远程仓库拉取并合并</td> <td>​<code>git pull</code>​</td> <td>​<code>gl</code>​</td></tr> <tr><td>合并分支</td> <td>​<code>git merge &lt;branch&gt;</code>​</td> <td>​<code>gm &lt;branch&gt;</code>​</td></tr> <tr><td>进 Stage</td> <td>​<code>git add</code>​</td> <td>​<code>ga</code>​</td></tr> <tr><td>提交</td> <td>​<code>git commit -m &lt;message&gt;</code>​</td> <td>​<code>gcmsg</code>​</td></tr> <tr><td>进 State + 提交一步到位</td> <td>​<code>git commit -am &lt;message&gt;</code>​</td> <td>​<code>gcam</code>​</td></tr> <tr><td>推到远程仓库（需新建远程分支）</td> <td>​<code>git push -u origin &lt;branch&gt;</code>​</td> <td>​<code>gpsup</code>​可以自感知当前分支名</td></tr> <tr><td>推到远程仓库（已有远程分支）</td> <td>​<code>git push</code>​</td> <td>​<code>gp</code>​</td></tr></tbody></table> <h2 id="文件操作"><a href="#文件操作" class="header-anchor">#</a> 文件操作</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>删除文件或目录</td> <td>​<code>git rm &lt;file&gt;</code>​</td> <td>​<code>grm &lt;file&gt;</code>​</td></tr> <tr><td>移动文件或目录</td> <td>​<code>git mv &lt;from&gt; &lt;to&gt;</code>​</td> <td>-</td></tr></tbody></table> <h2 id="查看信息"><a href="#查看信息" class="header-anchor">#</a> 查看信息</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>打印远程信息</td> <td>​<code>git remote -v</code>​</td> <td>​<code>grv</code>​</td></tr> <tr><td>查看工作目录的状态（那些文件有改动、哪些文件未跟踪）</td> <td>​<code>git status</code>​</td> <td>​<code>gst</code>​</td></tr> <tr><td>查看 Commit 之间的文件内容差异</td> <td>​<code>git diff</code>​</td> <td>​<code>gd</code>​</td></tr> <tr><td>查看提交日志</td> <td>​<code>git log</code>​</td> <td>-</td></tr></tbody></table> <p>OMZ 提供了一系列显示效果更好的日志查看便捷命令，推荐 <code>glol</code>​、<code>glola</code>​，比如 <code>glol</code>​ 的效果：</p> <p>​<img src="assets/00a1c5934de8414eb4e52d5301ad7eb5tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-7oari0o.awebp" alt="">​</p> <h2 id="后悔药"><a href="#后悔药" class="header-anchor">#</a> 后悔药</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>重置 HEAD 指针</td> <td>​<code>git reset</code>​</td> <td>​<code>grh</code>​</td></tr> <tr><td>回滚</td> <td>​<code>git revert &lt;commit&gt;</code>​</td> <td>​<code>grev</code>​</td></tr> <tr><td>删除远程分支 / Tag</td> <td>​<code>git push -d origin &lt;branch&gt;</code>​或<code>git push origin :&lt;branch&gt;</code>​</td> <td>​<code>gpod &lt;branch&gt;</code>​</td></tr></tbody></table> <h2 id="其他-2"><a href="#其他-2" class="header-anchor">#</a> 其他</h2> <table><thead><tr><th>操作</th> <th>命令</th> <th>OMZ 短名</th></tr></thead> <tbody><tr><td>查看 Tag 列表</td> <td>​<code>git tag</code>​</td> <td>-</td></tr> <tr><td>新建 Tag</td> <td>​<code>git tag &lt;name&gt;</code>​</td> <td>-</td></tr> <tr><td>推送 Tag</td> <td>​<code>git push &lt;tag-name&gt;</code>​</td> <td>-</td></tr></tbody></table> <h2 id="🗿-不常用-但非常有用的技巧"><a href="#🗿-不常用-但非常有用的技巧" class="header-anchor">#</a> 🗿 不常用，但非常有用的技巧</h2> <h2 id="修改提交者信息"><a href="#修改提交者信息" class="header-anchor">#</a> 修改提交者信息</h2> <p>公司要求提交信息是公司的邮箱，但你可能有自己的开源项目，如果忘记设置 <code>user.name</code>​ 和 <code>user.email</code>​ 就会产生不合场景的提交信息。</p> <p>如果公司的 Git 服务设置禁止非公司域邮箱提交，最终可能导致无法 push。</p> <p>也有可能你在自己的私人项目下以公司邮箱的身份提交了。</p> <h3 id="修改最近一次-commit-作者"><a href="#修改最近一次-commit-作者" class="header-anchor">#</a> 修改最近一次 commit 作者</h3> <p>提交一次即刻觉醒，及时止损。</p> <p>​<img src="assets/5e5c9857c8ef48bb96b0a1b04cda314ftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-w1i0nd1.awebp" alt="">​</p> <p>修正当前项目（非全局）下的用户信息（也可以直接编辑 <code>.git/config</code>​）：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> config user.name <span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span>
<span class="token function">git</span> config user.email <span class="token operator">&lt;</span>私人邮箱<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后执行 <code>git commit --amend --reset-author</code>​ 即可：</p> <p>​<img src="assets/742056593f054ad8961ffa6f7ef487catplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-oq1n8p7.awebp" alt="">​</p> <h3 id="修改多次-commit-作者"><a href="#修改多次-commit-作者" class="header-anchor">#</a> 修改多次 Commit 作者</h3> <p>但更多的时候可能是，已经错误提交了很多次，在最终 <code>push</code>​ 的时候被远程拒绝了。</p> <p>参考文档：<a href="https://dev.to/brayanarrieta/how-to-change-the-git-commit-author-56mg" title="https://dev.to/brayanarrieta/how-to-change-the-git-commit-author-56mg" target="_blank" rel="noopener noreferrer">dev.to/brayanarrie…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如下，在 GitHub 上的项目，我需要把「驳是」都改成「Jianchun Wang」。</p> <p>先 <code>tig</code>​ 查找并拷贝之前的正确的 Commit ID：</p> <p>​<img src="assets/a34eaf04386546769521956a2241a249tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-sc8o2oo.awebp" alt="">​</p> <p>以上，有 7 次的错误提交，并拷贝了这 7 次之前的 Commit ID。</p> <p>执行命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> rebase <span class="token parameter variable">--interactive</span> <span class="token parameter variable">--merge</span> <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>

<span class="token comment"># 或</span>
<span class="token function">git</span> rebase <span class="token parameter variable">-i</span> <span class="token parameter variable">-m</span> <span class="token operator">&lt;</span>commit-id<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在弹出的 Vim 界面中将需要修改的 Commit 前边的 <code>pick</code>​ 改成 <code>edit</code>​（可使用 Vim 替换指令 <code>:s/pick/edit/ 7</code>​），然后输入 <code>:wq</code>​：</p> <p>​<img src="assets/c1de657028104ae5ada76d0d207d52d3tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-r5i12v0.awebp" alt="">​</p> <p>随后，会发现被切到一个奇怪 <code>rebase-i</code>​ 分支，并有相关的提示：</p> <p>​<img src="assets/7bff531b61f34a8d881904253f6138d4tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-b4byufs.awebp" alt="">​</p> <p>实际上它并不是一个真正的分支，执行 <code>git branch</code>​ 可以看到 <code>(no brach, rebasing ...)</code>​：</p> <p>​<img src="assets/f4a07130090c4dcabf046dab56bf73cftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-qxuttrn.awebp" alt="">​</p> <p>根据步骤提示，依次执行 <code>git commit --amend --reset-author</code>​ + <code>git rebase --continue</code>​ 一直到最后返回到原分支：</p> <p>​<img src="assets/e9dd14ac01964c0589e6455d4561a007tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-qtt9fg8.awebp" alt="">​</p> <p>完成后的效果：</p> <p>​<img src="assets/c6bd1335d8ea4b2eb8191b9023a9bb02tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-2xckkp4.awebp" alt="">​</p> <h3 id="修改远程仓库"><a href="#修改远程仓库" class="header-anchor">#</a> 修改远程仓库</h3> <p>本地修正好之后，<code>git push -f</code>​。</p> <h2 id="真正的「暂存」-stash"><a href="#真正的「暂存」-stash" class="header-anchor">#</a> 真正的「暂存」- Stash</h2> <p>有这样的时候，代码写得正酣，还没有提交，因为还没有写完，一堆的报红，还没有格式调优，运行也必会出错。偏偏在这个时候，有个紧急的线上问题需要验证修复。这个时候提交不合适，还有可能被二哈拦截不让提交（虽然可以绕过）。</p> <p>这种情况下就需要用到 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgit-scm.com%2Fdocs%2Fgit-stash" title="https://git-scm.com/docs/git-stash" target="_blank" rel="noopener noreferrer">git-stash<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 了，记住下面几个命令就可以了：</p> <ul><li>​<code>git stash</code>​ 相当于 <code>git stash push</code>​</li> <li>​<code>git stash list</code>​</li> <li>​<code>git stash pop</code>​</li></ul> <p>把 Stash 看成是一个 <strong>临时</strong> 存放变更的场所即可，这个「临时」应尽可能短（不然真的容易忘）。</p> <p>一般来说执行 <code>git stash</code>​ 之后，处理完紧急事务后，再切回对应的分支后，需要立即 <code>git stash pop</code>​ 恢复到之前的状态。</p> <p>如果你害怕忘记，强烈推荐 Terminal 的 <a href="https://github.sheincorp.cn/romkatv/powerlevel10k" title="https://github.sheincorp.cn/romkatv/powerlevel10k" target="_blank" rel="noopener noreferrer">p10k<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 主题，可以看我的 <a href="https://juejin.cn/post/7267111166187012131#heading-34" title="https://juejin.cn/post/7267111166187012131#heading-34" target="_blank" rel="noopener noreferrer">入坑 iTerm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>下图可以看到 <code>git stash</code>​ 后，工作区变干净了，同时 p10k 的 Git 变更指示会以星号提醒你有多少个 Stash。</p> <p>​<img src="assets/4fd1696eefc14194a8c0bd11ef071e56tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-65ygd8p.awebp" alt="">​</p> <h2 id="挤一挤更健康-squash"><a href="#挤一挤更健康-squash" class="header-anchor">#</a> 挤一挤更健康 - Squash</h2> <p>新写需求的初期，代码高速增长期，我习惯高频提交以免中间出现任何不可回溯的问题（往往会一个 message 不断提交）。</p> <p>但这样的提交历史并不好看：</p> <p>​<img src="assets/388bf4de787b44789f57387461d016e7tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-fp6xjfr.awebp" alt="">​</p> <p>这里的 45 次提交，实际上都是在做同一件事情，为了避免 Code review 以及以后的代码回溯产生困扰，我们来对这些提交记录进行合并，这就需要用到 <a href="https://www.geeksforgeeks.org/git-squash/" title="https://www.geeksforgeeks.org/git-squash/" target="_blank" rel="noopener noreferrer">git-squash<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，注意 squash 不是一个命令，而是 <code>rebase</code>​ 的一种策略。参考以下步骤：</p> <h3 id="步骤-1-进入-rebase"><a href="#步骤-1-进入-rebase" class="header-anchor">#</a> 步骤 1 - 进入 Rebase</h3> <p>敲 Git 命令 <code>git rebase -i HEAD~45</code>​ 进入 Rebase 交互，包含头部 45 条 commit 记录。注意，这里看到的 Commit 是倒序排列的。</p> <p>​<img src="assets/a4b747b1fc5541648c36924ac49936a3tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-ndfasnj.awebp" alt="">​</p> <h3 id="步骤-2-修改-rebase-策略"><a href="#步骤-2-修改-rebase-策略" class="header-anchor">#</a> 步骤 2 - 修改 Rebase 策略</h3> <p>我们需要将除了第一行（<code>HEAD~45</code>​）之外的其余 2-45 行的 <code>pick</code>​ 改成 <code>squash</code>​（单写一个 s <code>即可</code>​）。</p> <p>这里需要用到 Vim 的文本替换技巧，敲 Vim 命令 <code>:2,45s/pick/s</code>​，第一个 <code>s</code>​ 是 Vim 的 <code>search</code>​ 命令，反斜杠后的 <code>s</code>​ 代表 <code>squash</code>​。改命令表示把第 2 到 45 行的 <code>pick</code>​ 改成 <code>s</code>​。</p> <p>​<img src="assets/2e4cf7b49c9c44fda94e36e0fc891e75tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-iv4wwcb.awebp" alt="">​</p> <h3 id="步骤-3-保存"><a href="#步骤-3-保存" class="header-anchor">#</a> 步骤 3 - 保存</h3> <p>第二步保存（<code>:wq</code>​）后，Git 会执行一些操作，然后将我们带到一个新的 Commit 提交界面，直接提交即可。</p> <p>执行完毕后，可以看到原来一长溜的提交记录都挤到一条记录中了：</p> <p>​<img src="assets/6e830a431be14e45a4917f8c26f7d924tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-8u9mqoq.awebp" alt="">​</p> <h2 id="📐-项目规范"><a href="#📐-项目规范" class="header-anchor">#</a> 📐 项目规范</h2> <h2 id="gitignore"><a href="#gitignore" class="header-anchor">#</a> .gitignore</h2> <blockquote><p>护住你的节操！避免没用的文件进入版本控制被人鄙视。</p></blockquote> <h3 id="哪些需要被忽略"><a href="#哪些需要被忽略" class="header-anchor">#</a> 哪些需要被忽略</h3> <p>哪些是「没用」的文件：</p> <ul><li><p>下载的依赖，如 <code>node_modules</code>​</p></li> <li><p>系统自动生成的文件，如 Mac 的 <code>.DS_Store</code>​，Windows 的 <code>Thumbs.db</code>​</p></li> <li><p>编码工具自动生成的项目配置</p> <ul><li>JB：<code>.idea</code>​</li> <li>VSCode：<code>.vscode</code>​</li> <li>Eclipse：<code>.settings</code>​、<code>.classpath</code>​、<code>.project</code>​</li> <li>Vim 的 <code>.xx.swap</code>​</li></ul></li> <li><p>构建产物</p></li></ul> <h3 id="提交无用文件的危害"><a href="#提交无用文件的危害" class="header-anchor">#</a> 提交无用文件的危害</h3> <ol><li>增加「代码」量，但也降低了代码提交者的「码品」，特别是下载的依赖</li> <li>产生没必要的冲突，尤其是系统文件、构建结果</li> <li>个人习惯困扰，尤其是编码工具自动生成的项目配置</li> <li>干扰全局搜索</li></ol> <h3 id="如何写一个好的-gitignore"><a href="#如何写一个好的-gitignore" class="header-anchor">#</a> 如何写一个好的 .gitignore</h3> <p>一个好的 <code>.gitignore</code>​ 应该具有足够的包容性和前瞻性。</p> <p>也就是说，在现在和将来的时间内，对不同习惯的开发者，大多数无用的文件都会被忽略，大多数有用的文件都不会被忽略。不需要频繁调整 <code>.gitignore</code>​，也不会经常有「无用」文件被不小心提交上来。</p> <p>我见过很多人对 <code>.gitignore</code>​ 的处理是做加法，罗列一大堆的「无用」文件，但总有漏网之鱼。</p> <p>我更建议的是 ​<strong>做减法</strong>​，特别是 <code>.xx</code>​，直接全忽略了，然后再添加例外。</p> <h3 id="我的-gitignore"><a href="#我的-gitignore" class="header-anchor">#</a> 我的 .gitignore</h3> <div class="language-gitignore line-numbers-mode"><pre class="language-gitignore"><code><span class="token comment"># common</span>
<span class="token entry string">.<span class="token operator">*</span></span>
<span class="token entry string"><span class="token operator">!</span>.<span class="token operator">*</span>ignore</span>
<span class="token entry string"><span class="token operator">!</span>.<span class="token operator">*</span>.yml</span>
<span class="token entry string"><span class="token operator">!</span>.<span class="token operator">*</span>.yaml</span>
<span class="token entry string"><span class="token operator">!</span>.<span class="token operator">*</span>rc</span>
<span class="token entry string"><span class="token operator">!</span>.<span class="token operator">*</span>rc.<span class="token operator">*</span></span>
<span class="token entry string"><span class="token operator">!</span>.husky</span>
<span class="token entry string"><span class="token operator">*</span>.log<span class="token operator">*</span></span>

<span class="token comment"># dev</span>

<span class="token entry string">node_modules<span class="token punctuation">/</span></span>

<span class="token comment"># generated</span>

<span class="token entry string">build<span class="token punctuation">/</span></span>
<span class="token entry string">coverage<span class="token punctuation">/</span></span>
<span class="token entry string"><span class="token operator">*</span>.lock</span>
<span class="token entry string"><span class="token operator">*</span>-lock.json</span>
<span class="token entry string"><span class="token operator">*</span>-lock.yaml</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ol><li>​<code>.*</code>​ 全部忽略了，但保留了所有 <code>.xxignore</code>​、<code>.xxrc</code>​、<code>.xx.yml</code>​、<code>.xx.yaml</code>​ 这些配置文件</li> <li>若有特殊的 <code>.xxrc</code>​ 文件（比如有的时候可能需要 <code>.npmrc</code>​ 因为它里边带来私人 Token）需要忽略，写到 <code>!.*rc</code>​ 下面就行了</li> <li>反对 lock（不要理我）</li></ol> <p>以上文件能够覆盖绝大多数的前端项目，至于后端项目，也差不多，稍微改改就行了。</p> <p>​<code>.gitignore</code>​ 的语法和更多说明看 <a href="https://git-scm.com/docs/gitignore" title="https://git-scm.com/docs/gitignore" target="_blank" rel="noopener noreferrer">官方说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="提交用户规范"><a href="#提交用户规范" class="header-anchor">#</a> 提交用户规范</h2> <p>尤其是对于公司的项目，规范提交者信息非常必要：</p> <ol><li>​<code>user.name</code>​ 的书写格式</li> <li>​<code>user.email</code>​ 必须是公司邮箱</li></ol> <p>软的规范不若硬的约束，参考我的 <a href="https://juejin.cn/post/7278994237949444136" title="https://juejin.cn/post/7278994237949444136" target="_blank" rel="noopener noreferrer">《你的前端工程，二哈和它的朋友们都安排上了么？》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下「约束提交用户信息和分支规范」一章。</p> <h2 id="提交-message-规范"><a href="#提交-message-规范" class="header-anchor">#</a> 提交 Message 规范</h2> <p>如何设置看我另一篇文章 <a href="https://juejin.cn/post/7278994237949444136" title="https://juejin.cn/post/7278994237949444136" target="_blank" rel="noopener noreferrer">《你的前端工程，二哈和它的朋友们都安排上了么？》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的「commitlint」一章。</p> <p>Git 从最初的设计就要求每次提交（commit）都必须带说明（commit message），以方便回顾和回滚。</p> <p>但每个人写 commit message 的习惯和风格都不一样，有的人写的很详细，有的人却图省事，一水的「update」或「提交」或「更新」。</p> <p>其实，Git message 是有规范的，那就是 <a href="https://www.conventionalcommits.org/" title="https://www.conventionalcommits.org" target="_blank" rel="noopener noreferrer">Conventional Commits<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，规范的具体细节这里就不展开了。</p> <p>光有规范不行，还必须有工具才行 —— <a href="https://commitlint.js.org/" title="https://commitlint.js.org" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>我一直说「工具是最好的老师」，<a href="https://commitlint.js.org/#/guides-local-setup" title="https://commitlint.js.org/#/guides-local-setup" target="_blank" rel="noopener noreferrer">设置 commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 后，你再提交就会受到良好的「教育」了。</p> <h2 id="分支规范"><a href="#分支规范" class="header-anchor">#</a> 分支规范</h2> <p>参考我的 <a href="https://juejin.cn/post/7278994237949444136" title="https://juejin.cn/post/7278994237949444136" target="_blank" rel="noopener noreferrer">《你的前端工程，二哈和它的朋友们都安排上了么？》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>下「约束提交用户信息和分支规范」一章。</p> <blockquote><p>我从来没有想到有人会用中文命名分支...</p></blockquote> <p>事实上，Git 分支可以是任何有效字符，甚至都可以用「恶魔鸡」：</p> <p>​<img src="assets/ea7d70a2b2b44083b79bba0188cca492tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-t7toeql.awebp" alt="">​</p> <h3 id="分支名书写规范"><a href="#分支名书写规范" class="header-anchor">#</a> 分支名书写规范</h3> <p>然而「给你自由过了火」就会犯罪，所以我们需要有一定的 ​<strong>书写规范</strong>​：</p> <ul><li>统一小写字母</li> <li>用 <code>/</code>​ 归类</li> <li>连字符用 <code>-</code>​</li></ul> <h3 id="分支名组成规范"><a href="#分支名组成规范" class="header-anchor">#</a> 分支名组成规范</h3> <p>默认 Git 只有一个常驻远程分支，也就是主分支，有些公司或个人可能会根据自己的基建定义多个常驻分支，比如 <code>dev</code>​、<code>test</code>​ 等，比如我的某个项目下有 <code>lerna/pub</code>​ 常驻分支，专门用来发包的。</p> <p>其余的分支，都应该是临时分支，它们的宿命就是被最终合并到主分支，并消失在历史的长河中。</p> <p>临时分支的命名规范，建议为 <code>类型/版本-简述</code>​，仅允许小写字母、数字、<code>-</code>​ 和 <code>/</code>​，不允许其他特殊字符，不允许大写，不允许中文。</p> <p>版本和简述，不一定两个都要，但至少需要有一个，描述不要超过 32 个字符。</p> <p>根据分支处理的事务，类型可以有以下几种：</p> <table><thead><tr><th>前缀</th> <th>作用</th> <th>代码修改</th> <th>升级版本号</th> <th>举例</th></tr></thead> <tbody><tr><td>​<code>feature/</code>​</td> <td>功能需求分支，新增、更新、移除某功能</td> <td>视需求，代码量一般不会很少</td> <td>​<code>minor</code>​</td> <td>​<code>feature/1.1.0-add-user-management</code>​</td></tr> <tr><td>​<code>fix/</code>​</td> <td>Bug 修复分支，修复问题</td> <td>代码量不多</td> <td>​<code>patch</code>​</td> <td>​<code>fix/1.1.1-user-display-name</code>​</td></tr> <tr><td>​<code>chore/</code>​</td> <td>工程分支，与项目构建、编程规范等有关的</td> <td>一般不涉及<code>src</code>​下的代码</td> <td>​<code>major</code>​或<code>minor</code>​</td> <td>​<code>chore/1.2.0-husky-and-friends</code>​</td></tr> <tr><td>​<code>docs/</code>​</td> <td>文档分支，更新说明性的文档，README 和<code>doc/</code>​目录下的文件</td> <td>仅 Markdown 文件</td> <td>​<code>minor</code>​或<code>patch</code>​</td> <td>​<code>docs/1.3.0-standards-for-dev</code>​</td></tr> <tr><td>​<code>test/</code>​</td> <td>测试分支，单元测试，Demo 等</td> <td>不影响生产</td> <td>​<code>minor</code>​或<code>patch</code>​</td> <td>​<code>test/1.4.0-util-fetcher</code>​</td></tr> <tr><td>​<code>perf/</code>​</td> <td>性能分支，优化性能有关问题</td> <td>不涉及业务逻辑</td> <td>​<code>minor</code>​或<code>patch</code>​</td> <td>​<code>perf/1.4.1-user-list-scroll</code>​</td></tr> <tr><td>​<code>refactor/</code>​</td> <td>重构分支，重构代码</td> <td>不涉及业务逻辑，但容易出 Regression Bug</td> <td>​<code>minor</code>​</td> <td>​<code>refactor/1.5.0-user-as-model</code>​</td></tr></tbody></table> <h2 id="🙋-faq"><a href="#🙋-faq" class="header-anchor">#</a> 🙋 FAQ</h2> <h2 id="❓-挠人的-passphrase-提示"><a href="#❓-挠人的-passphrase-提示" class="header-anchor">#</a> ❓ 挠人的 passphrase 提示</h2> <p>使用 SSH 协议克隆远程仓库时，每次 pull / push 都会提示「Enter passphrase for key '/Users/xx/.ssh/id_rsa'」。</p> <p>​<img src="assets/502a0207c3014db8a25034b7b478a5a9tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-i0l31dh.awebp" alt="">​</p> <p>这是因为在生成 SSH Key 的时候，根据提示设置了 passphrase，然而每次输入真的很烦。</p> <p>可以在命令行输入 <code>sh-keygen -p</code>​ 进行重新设置，直接回车输入为空，就没有密码了（只是删除密码 ssh 的 pub 不会改变）。</p> <p>​<img src="assets/0c48abe2a9774219ad32f2bf191c4ac8tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-p0odksf.awebp" alt="">​</p> <h2 id="❓-挠人的-git-pull-警告"><a href="#❓-挠人的-git-pull-警告" class="header-anchor">#</a> ❓ 挠人的 git pull 警告</h2> <p>按它说的设置一下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> pull.rebase <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="❓-奇怪的提示「modified-content-untracked-content」-怎么都-add​-不了"><a href="#❓-奇怪的提示「modified-content-untracked-content」-怎么都-add​-不了" class="header-anchor">#</a> ❓ 奇怪的提示「modified content, untracked content」，怎么都 <code>add</code>​ 不了</h2> <p>如下图，Git 状态是 clean 的，但查看状态永远有个提示「modified content, untracked content」。</p> <p>​<img src="assets/fe1115048ed743e2b541e1ee67d09e84tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-r33rovs.awebp" alt="">​</p> <p>这个问题，极有可能是你把某个 git 项目拷贝进来导致的，也就是说被提示的这个目录下有自己的 <code>.git</code>​ 目录，杀了它就行。</p> <h2 id="❓-如何解决冲突"><a href="#❓-如何解决冲突" class="header-anchor">#</a> ❓ 如何解决冲突</h2> <p>多人开发一定会合并分支，合并就难免冲突，即使一个人维护一个仓库，不同的需求根据时间先后，也难免自己冲突：</p> <p>​<img src="assets/238abec02ab548d1a4e699a329b586aftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-pepfgbs.awebp" alt="">​</p> <p>​<img src="assets/74ea8e5f901e4c21bec687915f6296d9tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-3rwnl95.awebp" alt="image.png">​</p> <p>注意它的提示，主要两个意思：</p> <ol><li>如果不想合并了，执行 <code>git merge --abort</code>​，将回到执行 <code>git merge &lt;another-branch&gt;</code>​ 之前的状态</li> <li>首先你需要改代码，把 Git 加的那些 Merge 标记清理干净，然后执行 <code>git commit -am &lt;message&gt;</code>​ 声明已完成</li></ol> <p>很多人看到冲突就慌了（尤其实际场景中，尤其当单个文件冲突量大的时候）。合并冲突，我只用 JB（右键菜单 <strong>Git</strong> → ​<strong>Resolve Conflict</strong>​）：</p> <p>​<img src="assets/a9f1fec37daa41ae8249b3b437bcc4edtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-nyocjiu.awebp" alt="">​</p> <h2 id="❓-pull-vs-fetch"><a href="#❓-pull-vs-fetch" class="header-anchor">#</a> ❓ pull vs fetch</h2> <blockquote><p>实在想不通居然有人面试会问这种问题 1。</p></blockquote> <p>​<img src="assets/1986bfa78d184570bf9dffc14ba21500tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-mye6x1c.awebp" alt="">​</p> <table><thead><tr><th>命令</th> <th>​<code>--help</code>​文档</th> <th>理解</th></tr></thead> <tbody><tr><td>​<code>pull</code>​</td> <td>Fetch from and integrate with another repository or a local branch</td> <td>比<code>fetch</code>​要多做一步，就是把下载来的「对象」合并到当前分支</td></tr> <tr><td>​<code>fetch</code>​</td> <td>Download objects and refs from another repository</td> <td>仅下载，下载到本地库，注意下载的是「对象」</td></tr></tbody></table> <p>可以简单理解 <code>pull == fetch + merge</code>​。</p> <h2 id="❓-reset-vs-revert"><a href="#❓-reset-vs-revert" class="header-anchor">#</a> ❓ reset vs revert</h2> <blockquote><p>实在想不通居然有人面试会问这种问题 2。</p></blockquote> <p>​<img src="assets/f10c3f8b9eff4fcab4ee9eed78ceed5ftplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-pzvtrcl.awebp" alt="">​</p> <table><thead><tr><th>命令</th> <th>​<code>--help</code>​文档</th> <th>理解</th></tr></thead> <tbody><tr><td>​<code>reset</code>​</td> <td>「Reset current HEAD to the specified state」</td> <td>重置 HEAD 指针</td></tr> <tr><td>​<code>revert</code>​</td> <td>「Revert some existing commits」</td> <td>撤销到某个 commit 的所有操作，并生成一个新的 commit</td></tr></tbody></table> <p>下图展示了 <code>reset</code>​ 对 Working Tree 的状态影响：</p> <p>​<img src="assets/b24e71ce020e4255a645eec0c4927e42tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-2dnk4x6.awebp" alt="">​</p> <p>由于 <code>reset</code>​ 的作用只是重置了一下 HEAD 指针，对于已经 <code>push</code>​ 了的变更，这个操作是无感知的，并没有产生实际的「回滚」，<code>pull</code>​ 一下又都回来了：</p> <p>​<img src="assets/533ffefbc46e431c80b6d6131c3646c5tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-noo7ghq.awebp" alt="">​</p> <p>对某一个或者几个的 Commit 方向做一次它的变更，然后生成新的 Commit，对于未涉及的 Commit 不影响。</p> <p>注意：不是「回滚到」某个 Commit，而是回滚某个 Commit 的变更。</p> <h2 id="❓-merge-vs-rebase"><a href="#❓-merge-vs-rebase" class="header-anchor">#</a> ❓ merge vs rebase</h2> <blockquote><p>实在想不通居然有人面试会问这种问题 3。</p></blockquote> <p>除了为写本文做的实验之外，实际场景我用 rebase 的次数一个手就可以数过来...</p> <p>从下面这张图（采自 GitKraken），可以看出两者的一些区别：</p> <ol><li>Merge 需要创建一个合并点，即多一条合并的 Commit，Rebase 不会添加 Commit</li> <li>Merge 不改变时间线，而 Rebase 的当前分支会整体时间线放在被 Rebase 的分支之后（该 Commit 记录的 CommitDate 被修改）</li></ol> <p>​<img src="assets/413f61a00d70403483292bf21e6be3f2tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-ztbvhsn.awebp" alt="">​</p> <p>更加抽象但可能更好理解的区别可以看下图，可以看出，Rebase 更像是对变更做 <strong>剪切复制</strong> 操作。</p> <p>​<img src="assets/8ddd6eda0ca14ff4a8a44a8fa97cae19tplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-h7ag27h.awebp" alt="">​</p> <p>有些人认为 Rebase 好，甚至说应该禁止 merge。我却不赞成他们提出的所谓「分支多，难看懂」的原因。说句实在话，有多少人一天到晚去翻历史分支的？我反倒认为多条时间线，在特定的时刻交汇，是很真实的美的体现。</p> <p>但 Rebase 有更多的使用场景，也更为强大，各种修改历史都需要用到它（在本文中有多处提及）。</p> <h2 id="❓-如何查看远程分支详情"><a href="#❓-如何查看远程分支详情" class="header-anchor">#</a> ❓ 如何查看远程分支详情？</h2> <p>通过 <code>git branch --remote</code>​ 或其对等命令 <code>git branch -r</code>​ / <code>gb --remote</code>​ / <code>gb -r</code>​ / <code>gbr</code>​，可以看到有哪些远程分支：</p> <p>​<img src="assets/2b19e969c64f49c1b0c711f080b9cc1etplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-8snz3gt.awebp" alt="">​</p> <p>这几乎没有什么借鉴意义，尤其是在多人一起维护一个项目的时候。通常，作为项目的主负责人，我希望可以看到有多少远程分支，每个分支是谁在负责，最近提交时间是什么，以判断这些分支的健康程度。</p> <p>使用以下命令，可以做到：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> for-each-ref refs/remotes <span class="token parameter variable">--sort</span><span class="token operator">=</span>committerdate <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">&quot;%(color:bold)%(committerdate:relative)%09%(color:blue)%(authorname)%(color:cyan)%09%(refname:lstrip=3)&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>​<img src="assets/a1aece45887f45c3ba8fe39cd407bf1dtplv-k3u1fbpfcp-jj-mark3024000q75-20240518161318-uhkw6r8.awebp" alt="">​</p> <p>可以看到超过好几个月，甚至超过一年的远程分支，基本可以断定烂尾了。</p> <p>写个 Alias 到 <code>.zshrc</code>​ 方便使用：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">alias</span> <span class="token assign-left variable">gbaa</span><span class="token operator">=</span><span class="token string">&quot;git for-each-ref refs/remotes --sort=committerdate --format=<span class="token entity" title="\&quot;">\&quot;</span>%(color:bold)%(committerdate:relative)%09%(color:blue)%(authorname)%(color:cyan)%09%(refname:lstrip=3)<span class="token entity" title="\&quot;">\&quot;</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="❓-如何批量清理远程-tag"><a href="#❓-如何批量清理远程-tag" class="header-anchor">#</a> ❓ 如何批量清理远程 Tag？</h2> <p>作为发包爱好者，我曾经凭一己之力把公司的 GitLab 搞卡死了..</p> <p>事情是这样的，我的项目用 Lerna 做 Monorepo 管理。基于一定的技术考量，我的包切得很碎。<a href="https://lerna.js.org/" title="https://lerna.js.org" target="_blank" rel="noopener noreferrer">Lerna<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 在 publish 的时候可能由于一个底层的小包而连带发布几十个包。而 Lerna每发一个包就为它创建一个 Tag。即使我不是每次都用 <code>lerna publish</code>​ 全量发布，久而久之，Tag 数目也是可观的。</p> <p>当 Tag 数到达一定数量级之后，Lerna 在拉取公司 GitLab Tag 列表的时候，由于服务端的问题，导致服务端卡死。</p> <p>虽然服务端后来修复了这个问题，但我还是养成了时不时清理不必要的远程 Tag 的习惯。</p> <p>Lerna Tag 跟包名关联，通常是 <code>@xx/...@x.y.z</code>​，跟常规分支有明显的区别，所以这个事情还是比较好处理的。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> tag <span class="token parameter variable">-l</span> <span class="token string">&quot;@&lt;namespace&gt;/*&quot;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token function">git</span> push <span class="token parameter variable">--delete</span> origin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>写到项目 <code>package.json</code>​ 下：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...<span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...<span class="token punctuation">,</span>
    <span class="token property">&quot;clean:tag:remote&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git tag -l \&quot;@xx/*\&quot; | xargs -n 1 git push --delete origin&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;clean:tag:local&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git tag -l \&quot;@xx/*\&quot; | xargs -n 1 git tag -d&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>就可以很简单的使用了。先清理 remote 再清理 local，注意清理完后 <code>git pull</code>​ 一下，因为清理远程 Tag 有失败的几率。</p> <h2 id="❓-如何解决-github-访问慢-甚至无法访问的问题"><a href="#❓-如何解决-github-访问慢-甚至无法访问的问题" class="header-anchor">#</a> ❓ 如何解决 GitHub 访问慢，甚至无法访问的问题？</h2> <p>国内经常访问不了 GitHub，或者访问速度慢。甚至有的公司也可能禁用 GitHub。</p> <h3 id="方法-1-改-host"><a href="#方法-1-改-host" class="header-anchor">#</a> 方法 1 - 改 Host</h3> <p>适用场景：</p> <ol><li>使用 GitHub 的 OAuth 登录的应用，如 VSCode 登录碰到超时连不上的问题</li> <li>需要访问 github.com</li></ol> <p>操作步骤：</p> <ol><li>在 <a href="http://www.ipaddress.com/" title="http://www.ipaddress.com" target="_blank" rel="noopener noreferrer">www.ipaddress.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 查询 <code>github.com</code>​ 的 IP，快捷地址 <a href="https://sites.ipaddress.com/github.com/" title="https://sites.ipaddress.com/github.com/" target="_blank" rel="noopener noreferrer">sites.ipaddress.com/github.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>修改 Host 添加 <code>xx.xx.xx.xx github.com</code>​</li> <li>重试</li></ol> <p>注意，修改 Host 后可能需要刷新 DNS，用完记得还原 Host。</p> <h3 id="方法-2-ghproxy-代理站"><a href="#方法-2-ghproxy-代理站" class="header-anchor">#</a> 方法 2 - ghproxy 代理站</h3> <blockquote><p>更新 2024/01/24：原 <code>ghproxy.com</code>​ 喜提 GFW，换成 <a href="https://mirror.ghproxy.com/" title="https://mirror.ghproxy.com" target="_blank" rel="noopener noreferrer">mirror.ghproxy.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></blockquote> <p>适用场景：</p> <ol><li>某些 Cli 的安装脚本中的 <code>curl</code>​ 可能会用它</li> <li>下载 github 上的某个资源</li></ol> <p>操作步骤：</p> <ol><li>若碰到下载 Github 的资源报错「Failed to connect to ... port 443」</li> <li>在对应的 URL 前拼上 <code>https://mirror.ghproxy.com/</code>​ 即可</li></ol> <p>支持的域名有：</p> <ul><li>​<code>https://mirror.ghproxy.com/https://github.com/...</code>​</li> <li>​<code>https://mirror.ghproxy.com/https://raw.githubusercontent.com/...</code>​</li> <li>​<code>https://mirror.ghproxy.com/https://gist.github.com/...</code>​</li> <li>​<code>https://mirror.ghproxy.com/https://gist.githubusercontent.com/...</code>​</li></ul> <p>更多用法可以直接访问 <a href="https://mirror.ghproxy.com/" title="https://mirror.ghproxy.com" target="_blank" rel="noopener noreferrer">mirror.ghproxy.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="方法-3-github-镜像站"><a href="#方法-3-github-镜像站" class="header-anchor">#</a> 方法 3 - GitHub 镜像站</h3> <p>几乎和 Github 一模一样的网站，但常常惨遭封杀。</p> <p>适用场景：</p> <ol><li>浏览 github.com 上的内容</li> <li>Clone 或下载</li></ol> <ul><li><a href="https://kkgithub.com/" title="https://kkgithub.com" target="_blank" rel="noopener noreferrer">kkgithub.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://hub.yzuu.cf/" title="https://hub.yzuu.cf" target="_blank" rel="noopener noreferrer">hub.yzuu.cf<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>​<s>​<code>https://hub.nuaa.cf</code>​</s>​</li> <li>​<s>​<code>https://hub.njuu.cf</code>​</s>​</li></ul> <h2 id="📌️-链接"><a href="#📌️-链接" class="header-anchor">#</a> 📌️ 链接</h2> <ul><li><a href="https://git-scm.com/" title="https://git-scm.com" target="_blank" rel="noopener noreferrer">Git 官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgit-scm.com%2Fbook" title="https://git-scm.com/book" target="_blank" rel="noopener noreferrer">Git Pro Book<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.atlassian.com/git/tutorials/atlassian-git-cheatsheet" title="https://www.atlassian.com/git/tutorials/atlassian-git-cheatsheet" target="_blank" rel="noopener noreferrer">Git Cheat Sheet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://learngitbranching.js.org/" title="https://learngitbranching.js.org" target="_blank" rel="noopener noreferrer">Learn Git Branching<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="🪭-写在最后"><a href="#🪭-写在最后" class="header-anchor">#</a> 🪭 写在最后</h2> <ol><li>这篇文章的题目，从原来设想的《我的 Git 使用记录》到《入坑 Git，看这一篇「应该」就够了》到《入坑 Git，看这一篇就够了》，感觉内容越写越多，就大放厥词吧</li> <li>奉劝强依赖 GUI 的同学：多用命令行，虽然我一直说 GUI 工具是「最好的老师」，但若强依赖好老师，无法出高徒</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改时间:</span> <span class="time">5/19/2024, 6:02:31 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/smallbird-treasure-site/assets/js/app.525bb3fc.js" defer></script><script src="/smallbird-treasure-site/assets/js/2.cec2e642.js" defer></script><script src="/smallbird-treasure-site/assets/js/1.4c6021ea.js" defer></script><script src="/smallbird-treasure-site/assets/js/29.1b24cec9.js" defer></script>
  </body>
</html>
